<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz - S√©nat</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
        }

        h1 {
            color: #2d2d2d;
            text-align: center;
            margin-bottom: 10px;
            font-size: 1.8rem;
        }

        .subtitle {
            color: #5a5a5a;
            text-align: center;
            margin-bottom: 25px;
        }

        /* Menu */
        #menu {
            display: block;
        }

        .filter-section {
            background: white;
            border: 1px solid #e0ddd5;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .filter-section h3 {
            color: #2d2d2d;
            margin-bottom: 15px;
        }

        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .filter-btn {
            padding: 8px 16px;
            border-radius: 20px;
            border: 2px solid #e0ddd5;
            background: transparent;
            color: #2d2d2d;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .filter-btn:hover {
            background: #f8f7f5;
        }

        .filter-btn.active {
            background: #cc785c;
            color: white;
            border-color: #cc785c;
        }

        .filter-count {
            color: #5a5a5a;
            font-size: 0.9rem;
            margin-top: 12px;
        }

        .mode-btn {
            display: flex;
            align-items: center;
            gap: 15px;
            width: 100%;
            padding: 20px;
            background: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            margin-bottom: 12px;
            text-align: left;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .mode-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .mode-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .mode-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .mode-icon.blue { background: #dbeafe; }
        .mode-icon.green { background: #d1fae5; }
        .mode-icon.orange { background: #fef3c7; }

        .mode-btn h4 {
            color: #1f2937;
            margin-bottom: 4px;
        }

        .mode-btn p {
            color: #6b7280;
            font-size: 0.85rem;
        }

        /* Quiz */
        #quiz {
            display: none;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .back-btn {
            color: #5a5a5a;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .back-btn:hover {
            color: #2d2d2d;
        }

        .progress-text {
            color: #2d2d2d;
        }

        .score {
            background: white;
            color: #2d2d2d;
            border: 1px solid #e0ddd5;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .progress-bar {
            height: 8px;
            background: #e0ddd5;
            border-radius: 10px;
            margin-bottom: 25px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #cc785c;
            border-radius: 10px;
            transition: width 0.3s;
        }

        .card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }

        .photo-section {
            display: flex;
            padding: 20px;
            gap: 20px;
            border-bottom: 1px solid #e5e7eb;
            align-items: center;
            justify-content: center;
        }

        .photo-container {
            position: relative;
            width: 180px;
            height: 180px;
            flex-shrink: 0;
            background: #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
        }

        .photo-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .info-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: flex-start;
            gap: 10px;
        }

        .fonction-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
            border: 1px solid;
            width: fit-content;
        }

        .badge-president { background: #fef3c7; color: #92400e; border-color: #fcd34d; }
        .badge-vice { background: #dbeafe; color: #1e40af; border-color: #93c5fd; }
        .badge-questeur { background: #d1fae5; color: #065f46; border-color: #6ee7b7; }
        .badge-secretaire { background: #ede9fe; color: #5b21b6; border-color: #c4b5fd; }
        .badge-cdp { background: #fce7f3; color: #9d174d; border-color: #f9a8d4; }
        .badge-pres-groupe { background: #e0f2fe; color: #0369a1; border-color: #7dd3fc; }
        .badge-pres-commission { background: #fef3c7; color: #b45309; border-color: #fcd34d; }
        .badge-pres-delegation { background: #d1fae5; color: #047857; border-color: #6ee7b7; }

        .groupe-politique {
            font-size: 0.85rem;
            color: #6b7280;
            line-height: 1.4;
        }

        .groupe-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .groupe-lr { background: #dbeafe; color: #1e40af; }
        .groupe-ser { background: #fce7f3; color: #9d174d; }
        .groupe-uc { background: #fef3c7; color: #92400e; }
        .groupe-rdpi { background: #e0e7ff; color: #3730a3; }
        .groupe-lirt { background: #f3e8ff; color: #6b21a8; }
        .groupe-crce { background: #fee2e2; color: #991b1b; }
        .groupe-est { background: #d1fae5; color: #065f46; }
        .groupe-rdse { background: #fef9c3; color: #854d0e; }

        .card-content {
            padding: 20px;
        }

        .answer-display {
            text-align: center;
            padding: 15px 0;
        }

        .answer-display .name {
            font-size: 1.4rem;
            font-weight: bold;
            color: #1f2937;
        }

        .answer-display .fonction {
            color: #6b7280;
            margin-top: 5px;
        }

        .show-btn {
            width: 100%;
            padding: 15px;
            background: #cc785c;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: background 0.2s;
        }

        .show-btn:hover {
            background: #b86a4f;
        }

        /* QCM */
        .qcm-question {
            text-align: center;
            color: #6b7280;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .qcm-step-indicator {
            text-align: center;
            margin-bottom: 10px;
        }

        .step-dot {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin: 0 5px;
            background: #e5e7eb;
        }

        .step-dot.active {
            background: #cc785c;
        }

        .step-dot.done {
            background: #10b981;
        }

        .qcm-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .qcm-option {
            width: 100%;
            padding: 14px;
            background: #f3f4f6;
            border: 2px solid transparent;
            border-radius: 12px;
            font-size: 0.95rem;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
        }

        .qcm-option:hover:not(:disabled) {
            background: #fef3ed;
        }

        .qcm-option.correct {
            background: #d1fae5;
            border-color: #10b981;
            color: #065f46;
        }

        .qcm-option.incorrect {
            background: #fee2e2;
            border-color: #ef4444;
            color: #991b1b;
        }

        .qcm-option:disabled {
            cursor: default;
            opacity: 0.7;
        }

        .qcm-name-result {
            text-align: center;
            padding: 15px;
            background: #f9fafb;
            border-radius: 12px;
            margin-bottom: 15px;
        }

        .qcm-name-result .name {
            font-size: 1.2rem;
            font-weight: bold;
            color: #1f2937;
        }

        /* Quiz libre */
        .quiz-input {
            width: 100%;
            padding: 14px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 1rem;
            margin-bottom: 12px;
        }

        .quiz-input:focus {
            outline: none;
            border-color: #cc785c;
        }

        .check-btn {
            width: 100%;
            padding: 14px;
            background: #cc785c;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            cursor: pointer;
        }

        .check-btn:hover {
            background: #b86a4f;
        }

        .feedback {
            text-align: center;
            padding: 12px;
            border-radius: 12px;
            margin-top: 15px;
            font-weight: 500;
        }

        .feedback.correct {
            background: #d1fae5;
            color: #065f46;
        }

        .feedback.incorrect {
            background: #fee2e2;
            color: #991b1b;
        }

        /* Navigation */
        .nav-buttons {
            display: flex;
            gap: 12px;
            padding: 0 20px 20px;
        }

        .nav-btn {
            flex: 1;
            padding: 12px;
            border-radius: 12px;
            font-size: 0.95rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.2s;
        }

        .nav-btn.secondary {
            background: white;
            border: 2px solid #e5e7eb;
            color: #6b7280;
        }

        .nav-btn.secondary:hover:not(:disabled) {
            background: #f9fafb;
        }

        .nav-btn.primary {
            background: #cc785c;
            border: none;
            color: white;
        }

        .nav-btn.primary:hover:not(:disabled) {
            background: #b86a4f;
        }

        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .key-hint {
            font-size: 0.7rem;
            opacity: 0.7;
            margin-left: 5px;
        }

        /* Final score */
        .final-score {
            background: white;
            border: 1px solid #e0ddd5;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            margin-top: 20px;
        }

        .final-score h3 {
            color: #2d2d2d;
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        .final-score p {
            color: #5a5a5a;
            font-size: 1.1rem;
        }

        .hidden {
            display: none !important;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
        }

        .back-to-home {
            color: #cc785c;
            text-decoration: none;
            font-size: 14px;
        }

        .back-to-home:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèõÔ∏è S√©nat</h1>
        <p class="subtitle">Apprenez √† reconna√Ætre les s√©nateurs cl√©s</p>

        <!-- MENU -->
        <div id="menu">
            <div class="filter-section">
                <h3>Filtrer par :</h3>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="bureau">Bureau (26)</button>
                    <button class="filter-btn active" data-filter="cdp">CDP (9)</button>
                    <button class="filter-btn active" data-filter="pres-groupe">Pr√©s. de groupe (8)</button>
                    <button class="filter-btn active" data-filter="pres-commission">Pr√©s. de com. (7)</button>
                    <button class="filter-btn active" data-filter="pres-delegation">Pr√©s. de d√©l. (5)</button>
                </div>
                <p class="filter-count" id="filterCount">55 s√©nateurs s√©lectionn√©s</p>
            </div>

            <button class="mode-btn" data-mode="flashcard">
                <div class="mode-icon blue">üìñ</div>
                <div>
                    <h4>Flashcards</h4>
                    <p>Parcourez les photos pour m√©moriser</p>
                </div>
            </button>

            <button class="mode-btn" data-mode="qcm">
                <div class="mode-icon green">üß†</div>
                <div>
                    <h4>Quiz QCM</h4>
                    <p>Devinez le nom puis le groupe politique</p>
                </div>
            </button>

            <button class="mode-btn" data-mode="libre">
                <div class="mode-icon orange">üèÜ</div>
                <div>
                    <h4>Quiz Libre</h4>
                    <p>Tapez le nom - mode expert !</p>
                </div>
            </button>

            <footer>
                <a href="index.html" class="back-to-home">‚Üê Retour √† la liste des outils</a>
            </footer>
        </div>

        <!-- QUIZ -->
        <div id="quiz">
            <div class="header">
                <button class="back-btn" id="backBtn">‚Üê Retour</button>
                <span class="progress-text" id="progressText">1 / 26</span>
                <span class="score" id="scoreDisplay">Score: 0/0</span>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <div class="card">
                <div class="photo-section">
                    <div class="photo-container">
                        <img id="photo" src="" alt="S√©nateur">
                    </div>
                    <div class="info-container">
                        <span class="fonction-badge" id="fonctionBadge"></span>
                        <div class="groupe-politique" id="groupePolitique"></div>
                    </div>
                </div>

                <div class="card-content">
                    <!-- Flashcard mode -->
                    <div id="flashcardContent">
                        <div id="flashcardHidden">
                            <button class="show-btn" id="showAnswerBtn">üëÅÔ∏è Voir le nom <span class="key-hint">[Entr√©e]</span></button>
                        </div>
                        <div id="flashcardRevealed" class="hidden">
                            <div class="answer-display">
                                <div class="name" id="revealedName"></div>
                                <div class="fonction" id="revealedFonction"></div>
                            </div>
                        </div>
                    </div>

                    <!-- QCM mode -->
                    <div id="qcmContent" class="hidden">
                        <div class="qcm-step-indicator">
                            <span class="step-dot" id="stepDot1"></span>
                            <span class="step-dot" id="stepDot2"></span>
                        </div>
                        <p class="qcm-question" id="qcmQuestion">Qui est ce s√©nateur ?</p>
                        <div id="qcmNameResult" class="qcm-name-result hidden">
                            <div class="name" id="qcmCorrectName"></div>
                        </div>
                        <div class="qcm-options" id="qcmOptions"></div>
                        <div class="feedback hidden" id="qcmFeedback"></div>
                    </div>

                    <!-- Quiz libre mode -->
                    <div id="libreContent" class="hidden">
                        <div id="libreInput">
                            <input type="text" class="quiz-input" id="answerInput" placeholder="Entrez le nom...">
                            <button class="check-btn" id="checkBtn">V√©rifier <span class="key-hint">[Entr√©e]</span></button>
                        </div>
                        <div id="libreResult" class="hidden">
                            <div class="answer-display">
                                <div class="name" id="libreCorrectName"></div>
                            </div>
                            <div class="feedback" id="libreFeedback"></div>
                        </div>
                    </div>
                </div>

                <div class="nav-buttons">
                    <button class="nav-btn secondary" id="prevBtn">‚Üê Pr√©c√©dent <span class="key-hint">[‚Üê]</span></button>
                    <button class="nav-btn primary" id="nextBtn">Suivant ‚Üí <span class="key-hint">[‚Üí]</span></button>
                </div>
            </div>

            <div class="final-score hidden" id="finalScore">
                <h3>üéâ Quiz termin√© !</h3>
                <p id="finalScoreText"></p>
            </div>

            <footer>
                <a href="index.html" class="back-to-home">‚Üê Retour √† la liste des outils</a>
            </footer>
        </div>
    </div>

    <script>
        // Membres du Bureau du S√©nat (26)
        const bureauMembers = [
            { nom: "LARCHER", prenom: "G√©rard", fonction: "Pr√©sident", type: "president", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/larcher_gerard86034e_carre.jpg", category: "bureau", genre: "M" },
            { nom: "MANDELLI", prenom: "Didier", fonction: "Vice-pr√©sident", type: "vice", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/mandelli_didier14031r_carre.jpg", category: "bureau", genre: "M" },
            { nom: "ROBERT", prenom: "Sylvie", fonction: "Vice-pr√©sidente", type: "vice", groupe: "Socialiste, √âcologiste et R√©publicain", groupeType: "ser", avatar: "https://www.senat.fr/senimg/robert_sylvie14229s_carre.jpg", category: "bureau", genre: "F" },
            { nom: "VERMEILLET", prenom: "Sylvie", fonction: "Vice-pr√©sidente", type: "vice", groupe: "Union Centriste", groupeType: "uc", avatar: "https://www.senat.fr/senimg/vermeillet_sylvie19479g_carre.jpg", category: "bureau", genre: "F" },
            { nom: "IACOVELLI", prenom: "Xavier", fonction: "Vice-pr√©sident", type: "vice", groupe: "RDPI", groupeType: "rdpi", avatar: "https://www.senat.fr/senimg/iacovelli_xavier19591f_carre.jpg", category: "bureau", genre: "M" },
            { nom: "MARC", prenom: "Alain", fonction: "Vice-pr√©sident", type: "vice", groupe: "Les Ind√©pendants", groupeType: "lirt", avatar: "https://www.senat.fr/senimg/marc_alain14111d_carre.jpg", category: "bureau", genre: "M" },
            { nom: "OUZOULIAS", prenom: "Pierre", fonction: "Vice-pr√©sident", type: "vice", groupe: "CRCE-K", groupeType: "crce", avatar: "https://www.senat.fr/senimg/ouzoulias_pierre19593h_carre.jpg", category: "bureau", genre: "M" },
            { nom: "CHAIN-LARCH√â", prenom: "Anne", fonction: "Vice-pr√©sidente", type: "vice", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/chain_larche_anne14329v_carre.jpg", category: "bureau", genre: "F" },
            { nom: "HERV√â", prenom: "Lo√Øc", fonction: "Vice-pr√©sident", type: "vice", groupe: "Union Centriste", groupeType: "uc", avatar: "https://www.senat.fr/senimg/herve_loic14179a_carre.jpg", category: "bureau", genre: "M" },
            { nom: "LEF√àVRE", prenom: "Antoine", fonction: "Questeur", type: "questeur", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/lefevre_antoine08010l_carre.jpg", category: "bureau", genre: "M" },
            { nom: "CARLOTTI", prenom: "Marie-Arlette", fonction: "Questeur", type: "questeur", groupe: "Socialiste, √âcologiste et R√©publicain", groupeType: "ser", avatar: "https://www.senat.fr/senimg/carlotti_marie_arlette12028b_carre.jpg", category: "bureau", genre: "F" },
            { nom: "CIGOLOTTI", prenom: "Olivier", fonction: "Questeur", type: "questeur", groupe: "Union Centriste", groupeType: "uc", avatar: "https://www.senat.fr/senimg/cigolotti_olivier14267y_carre.jpg", category: "bureau", genre: "M" },
            { nom: "ARNAUD", prenom: "Jean-Michel", fonction: "Secr√©taire", type: "secretaire", groupe: "Union Centriste", groupeType: "uc", avatar: "https://www.senat.fr/senimg/arnaud_jean_michel14189c_carre.jpg", category: "bureau", genre: "M" },
            { nom: "BENARROCHE", prenom: "Guy", fonction: "Secr√©taire", type: "secretaire", groupe: "√âcologiste", groupeType: "est", avatar: "https://www.senat.fr/senimg/benarroche_guy20110q_carre.jpg", category: "bureau", genre: "M" },
            { nom: "BONHOMME", prenom: "Fran√ßois", fonction: "Secr√©taire", type: "secretaire", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/bonhomme_francois14069u_carre.jpg", category: "bureau", genre: "M" },
            { nom: "BONNEFOY", prenom: "Nicole", fonction: "Secr√©taire", type: "secretaire", groupe: "Socialiste, √âcologiste et R√©publicain", groupeType: "ser", avatar: "https://www.senat.fr/senimg/bonnefoy_nicole08060w_carre.jpg", category: "bureau", genre: "F" },
            { nom: "BORCHIO FONTIMP", prenom: "Alexandra", fonction: "Secr√©taire", type: "secretaire", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/borchio_fontimp_alexandra20138d_carre.jpg", category: "bureau", genre: "F" },
            { nom: "BRULIN", prenom: "C√©line", fonction: "Secr√©taire", type: "secretaire", groupe: "CRCE-K", groupeType: "crce", avatar: "https://www.senat.fr/senimg/brulin_celine19758l_carre.jpg", category: "bureau", genre: "F" },
            { nom: "BUIS", prenom: "Bernard", fonction: "Secr√©taire", type: "secretaire", groupe: "RDPI", groupeType: "rdpi", avatar: "https://www.senat.fr/senimg/buis_bernard19782l_carre.jpg", category: "bureau", genre: "M" },
            { nom: "CONCONNE", prenom: "Catherine", fonction: "Secr√©taire", type: "secretaire", groupe: "Socialiste, √âcologiste et R√©publicain", groupeType: "ser", avatar: "https://www.senat.fr/senimg/conconne_catherine19295a_carre.jpg", category: "bureau", genre: "F" },
            { nom: "DI FOLCO", prenom: "Catherine", fonction: "Secr√©taire", type: "secretaire", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/di_folco_catherine14215l_carre.jpg", category: "bureau", genre: "F" },
            { nom: "GENET", prenom: "Fabien", fonction: "Secr√©taire", type: "secretaire", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/genet_fabien20120s_carre.jpg", category: "bureau", genre: "M" },
            { nom: "GUILLOTIN", prenom: "V√©ronique", fonction: "Secr√©taire", type: "secretaire", groupe: "RDSE", groupeType: "rdse", avatar: "https://www.senat.fr/senimg/guillotin_veronique19553y_carre.jpg", category: "bureau", genre: "F" },
            { nom: "de LA PROV√îT√â", prenom: "Sonia", fonction: "Secr√©taire", type: "secretaire", groupe: "Union Centriste", groupeType: "uc", avatar: "https://www.senat.fr/senimg/de_la_provote_sonia19735d_carre.jpg", category: "bureau", genre: "F" },
            { nom: "RICHER", prenom: "Marie-Pierre", fonction: "Secr√©taire", type: "secretaire", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/richer_marie_pierre19798u_carre.jpg", category: "bureau", genre: "F" },
            { nom: "VALLET", prenom: "Micka√´l", fonction: "Secr√©taire", type: "secretaire", groupe: "Socialiste, √âcologiste et R√©publicain", groupeType: "ser", avatar: "https://www.senat.fr/senimg/vallet_mickael20064c_carre.jpg", category: "bureau", genre: "M" },
        ];

        // Membres du Comit√© de d√©ontologie parlementaire (9)
        const cdpMembers = [
            { nom: "BAZIN", prenom: "Arnaud", fonction: "Pr√©sident CDP", type: "cdp", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/bazin_arnaud19667j_carre.jpg", category: "cdp", genre: "M" },
            { nom: "HARRIBEY", prenom: "Laurence", fonction: "Vice-Pr√©sidente CDP", type: "cdp", groupe: "Socialiste, √âcologiste et R√©publicain", groupeType: "ser", avatar: "https://www.senat.fr/senimg/harribey_laurence19725b_carre.jpg", category: "cdp", genre: "F" },
            { nom: "BACCHI", prenom: "J√©r√©my", fonction: "Membre CDP", type: "cdp", groupe: "CRCE-K", groupeType: "crce", avatar: "https://www.senat.fr/senimg/bacchi_jeremy20112s_carre.jpg", category: "cdp", genre: "M" },
            { nom: "CABANEL", prenom: "Henri", fonction: "Membre CDP", type: "cdp", groupe: "RDSE", groupeType: "rdse", avatar: "https://www.senat.fr/senimg/cabanel_henri14207l_carre.jpg", category: "cdp", genre: "M" },
            { nom: "CAPUS", prenom: "Emmanuel", fonction: "Membre CDP", type: "cdp", groupe: "Les Ind√©pendants", groupeType: "lirt", avatar: "https://www.senat.fr/senimg/capus_emmanuel19545y_carre.jpg", category: "cdp", genre: "M" },
            { nom: "FERNIQUE", prenom: "Jacques", fonction: "Membre CDP", type: "cdp", groupe: "√âcologiste", groupeType: "est", avatar: "https://www.senat.fr/senimg/fernique_jacques20100n_carre.jpg", category: "cdp", genre: "M" },
            { nom: "IMBERT", prenom: "Corinne", fonction: "Membre CDP", type: "cdp", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/imbert_corinne14213j_carre.jpg", category: "cdp", genre: "F" },
            { nom: "LEVI", prenom: "Pierre-Antoine", fonction: "Membre CDP", type: "cdp", groupe: "Union Centriste", groupeType: "uc", avatar: "https://www.senat.fr/senimg/levi_pierre_antoine20052x_carre.jpg", category: "cdp", genre: "M" },
            { nom: "TH√âOPHILE", prenom: "Dominique", fonction: "Membre CDP", type: "cdp", groupe: "RDPI", groupeType: "rdpi", avatar: "https://www.senat.fr/senimg/theophile_dominique19301e_carre.jpg", category: "cdp", genre: "M" },
        ];

        // Pr√©sidents de groupe (8)
        const presGroupeMembers = [
            { nom: "DARNAUD", prenom: "Mathieu", fonction: "Pr√©sident groupe LR", type: "pres-groupe", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/darnaud_mathieu14259y_carre.jpg", category: "pres-groupe", genre: "M" },
            { nom: "KANNER", prenom: "Patrick", fonction: "Pr√©sident groupe SER", type: "pres-groupe", groupe: "Socialiste, √âcologiste et R√©publicain", groupeType: "ser", avatar: "https://www.senat.fr/senimg/kanner_patrick14021p_carre.jpg", category: "pres-groupe", genre: "M" },
            { nom: "MARSEILLE", prenom: "Herv√©", fonction: "Pr√©sident groupe UC", type: "pres-groupe", groupe: "Union Centriste", groupeType: "uc", avatar: "https://www.senat.fr/senimg/marseille_herve11085t_carre.jpg", category: "pres-groupe", genre: "M" },
            { nom: "MALHURET", prenom: "Claude", fonction: "Pr√©sident groupe LIRT", type: "pres-groupe", groupe: "Les Ind√©pendants", groupeType: "lirt", avatar: "https://www.senat.fr/senimg/malhuret_claude14251q_carre.jpg", category: "pres-groupe", genre: "M" },
            { nom: "PATRIAT", prenom: "Fran√ßois", fonction: "Pr√©sident groupe RDPI", type: "pres-groupe", groupe: "RDPI", groupeType: "rdpi", avatar: "https://www.senat.fr/senimg/patriat_francois08061x_carre.jpg", category: "pres-groupe", genre: "M" },
            { nom: "CUKIERMAN", prenom: "C√©cile", fonction: "Pr√©sidente groupe CRCE-K", type: "pres-groupe", groupe: "CRCE-K", groupeType: "crce", avatar: "https://www.senat.fr/senimg/cukierman_cecile11056n_carre.jpg", category: "pres-groupe", genre: "F" },
            { nom: "CARR√àRE", prenom: "Maryse", fonction: "Pr√©sidente groupe RDSE", type: "pres-groupe", groupe: "RDSE", groupeType: "rdse", avatar: "https://www.senat.fr/senimg/carrere_maryse19629c_carre.jpg", category: "pres-groupe", genre: "F" },
            { nom: "GONTARD", prenom: "Guillaume", fonction: "Pr√©sident groupe EST", type: "pres-groupe", groupe: "√âcologiste", groupeType: "est", avatar: "https://www.senat.fr/senimg/gontard_guillaume19347u_carre.jpg", category: "pres-groupe", genre: "M" },
        ];

        // Pr√©sidents de commission (7)
        const presCommissionMembers = [
            { nom: "LAFON", prenom: "Laurent", fonction: "Pr√©s. com. Culture", type: "pres-commission", groupe: "Union Centriste", groupeType: "uc", avatar: "https://www.senat.fr/senimg/lafon_laurent19611r_carre.jpg", category: "pres-commission", genre: "M" },
            { nom: "ESTROSI SASSONE", prenom: "Dominique", fonction: "Pr√©s. com. √âco.", type: "pres-commission", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/estrosi_sassone_dominique14187a_carre.jpg", category: "pres-commission", genre: "F" },
            { nom: "PERRIN", prenom: "C√©dric", fonction: "Pr√©s. com. Aff. √©tr.", type: "pres-commission", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/perrin_cedric14193x_carre.jpg", category: "pres-commission", genre: "M" },
            { nom: "MOUILLER", prenom: "Philippe", fonction: "Pr√©s. com. Aff. soc.", type: "pres-commission", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/mouiller_philippe14071n_carre.jpg", category: "pres-commission", genre: "M" },
            { nom: "LONGEOT", prenom: "Jean-Fran√ßois", fonction: "Pr√©s. com. Am√©nag.", type: "pres-commission", groupe: "Union Centriste", groupeType: "uc", avatar: "https://www.senat.fr/senimg/longeot_jean_francois14219q_carre.jpg", category: "pres-commission", genre: "M" },
            { nom: "RAYNAL", prenom: "Claude", fonction: "Pr√©s. com. Finances", type: "pres-commission", groupe: "Socialiste, √âcologiste et R√©publicain", groupeType: "ser", avatar: "https://www.senat.fr/senimg/raynal_claude14225n_carre.jpg", category: "pres-commission", genre: "M" },
            { nom: "JOURDA", prenom: "Muriel", fonction: "Pr√©s. com. Lois", type: "pres-commission", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/jourda_muriel19447x_carre.jpg", category: "pres-commission", genre: "F" },
        ];

        // Pr√©sidents de d√©l√©gation (5)
        const presDelegationMembers = [
            { nom: "DELCROS", prenom: "Bernard", fonction: "Pr√©s. d√©l. Coll. terr.", type: "pres-delegation", groupe: "Union Centriste", groupeType: "uc", avatar: "https://www.senat.fr/senimg/delcros_bernard14327t_carre.jpg", category: "pres-delegation", genre: "M" },
            { nom: "V√âRIEN", prenom: "Dominique", fonction: "Pr√©s. d√©l. Droits femmes", type: "pres-delegation", groupe: "Union Centriste", groupeType: "uc", avatar: "https://www.senat.fr/senimg/verien_dominique19749k_carre.jpg", category: "pres-delegation", genre: "F" },
            { nom: "RIETMANN", prenom: "Olivier", fonction: "Pr√©s. d√©l. Entreprises", type: "pres-delegation", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/rietmann_olivier20054a_carre.jpg", category: "pres-delegation", genre: "M" },
            { nom: "JACQUES", prenom: "Micheline", fonction: "Pr√©s. d√©l. Outre-mer", type: "pres-delegation", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/jacques_micheline20034v_carre.jpg", category: "pres-delegation", genre: "F" },
            { nom: "LAVARDE", prenom: "Christine", fonction: "Pr√©s. d√©l. Prospective", type: "pres-delegation", groupe: "Les R√©publicains", groupeType: "lr", avatar: "https://www.senat.fr/senimg/lavarde_christine19711u_carre.jpg", category: "pres-delegation", genre: "F" },
        ];

        // Tous les membres
        const allMembers = [...bureauMembers, ...cdpMembers, ...presGroupeMembers, ...presCommissionMembers, ...presDelegationMembers];

        // Liste des groupes uniques pour le QCM
        const groupes = [...new Set(allMembers.map(m => m.groupe))];

        // D√©lai avant passage automatique (en ms)
        const AUTO_NEXT_DELAY = 1200;

        // √âtat de l'application
        let activeFilters = new Set(['bureau', 'cdp', 'pres-groupe', 'pres-commission', 'pres-delegation']);
        let currentMode = '';
        let filteredMembers = [];
        let shuffledMembers = [];
        let currentIndex = 0;
        let score = { correct: 0, total: 0 };
        let answered = false;
        let qcmStep = 1;
        let autoNextTimeout = null;

        // √âl√©ments DOM
        const menu = document.getElementById('menu');
        const quiz = document.getElementById('quiz');
        const photo = document.getElementById('photo');
        const fonctionBadge = document.getElementById('fonctionBadge');
        const groupePolitique = document.getElementById('groupePolitique');
        const progressText = document.getElementById('progressText');
        const progressFill = document.getElementById('progressFill');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const filterCount = document.getElementById('filterCount');

        // Fonction de normalisation (accents, tirets, espaces, casse)
        function normalize(str) {
            return str
                .toLowerCase()
                .normalize("NFD")
                .replace(/[\u0300-\u036f]/g, "")
                .replace(/[-\s]/g, "");
        }

        // Obtenir les membres filtr√©s (sans doublons)
        function getFilteredMembers() {
            const members = [];
            const seen = new Set();

            if (activeFilters.has('bureau')) {
                bureauMembers.forEach(m => {
                    if (!seen.has(m.nom)) {
                        members.push(m);
                        seen.add(m.nom);
                    }
                });
            }
            if (activeFilters.has('cdp')) {
                cdpMembers.forEach(m => {
                    if (!seen.has(m.nom)) {
                        members.push(m);
                        seen.add(m.nom);
                    }
                });
            }
            if (activeFilters.has('pres-groupe')) {
                presGroupeMembers.forEach(m => {
                    if (!seen.has(m.nom)) {
                        members.push(m);
                        seen.add(m.nom);
                    }
                });
            }
            if (activeFilters.has('pres-commission')) {
                presCommissionMembers.forEach(m => {
                    if (!seen.has(m.nom)) {
                        members.push(m);
                        seen.add(m.nom);
                    }
                });
            }
            if (activeFilters.has('pres-delegation')) {
                presDelegationMembers.forEach(m => {
                    if (!seen.has(m.nom)) {
                        members.push(m);
                        seen.add(m.nom);
                    }
                });
            }

            return members;
        }

        // Mettre √† jour le compteur
        function updateFilterCount() {
            const count = getFilteredMembers().length;
            filterCount.textContent = `${count} s√©nateur${count > 1 ? 's' : ''} s√©lectionn√©${count > 1 ? 's' : ''}`;

            // D√©sactiver les boutons de mode si aucun filtre actif
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.disabled = count === 0;
            });
        }

        // Filtres (toggle)
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const filter = btn.dataset.filter;

                if (activeFilters.has(filter)) {
                    activeFilters.delete(filter);
                    btn.classList.remove('active');
                } else {
                    activeFilters.add(filter);
                    btn.classList.add('active');
                }

                updateFilterCount();
            });
        });

        // Boutons de mode
        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                if (btn.disabled) return;
                currentMode = btn.dataset.mode;
                startQuiz();
            });
        });

        // Retour
        document.getElementById('backBtn').addEventListener('click', () => {
            clearTimeout(autoNextTimeout);
            menu.style.display = 'block';
            quiz.style.display = 'none';
        });

        // Fonction shuffle
        function shuffle(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // D√©marrer le quiz
        function startQuiz() {
            clearTimeout(autoNextTimeout);

            filteredMembers = getFilteredMembers();
            shuffledMembers = shuffle(filteredMembers);
            currentIndex = 0;
            score = { correct: 0, total: 0 };
            answered = false;

            menu.style.display = 'none';
            quiz.style.display = 'block';
            document.getElementById('finalScore').classList.add('hidden');

            document.getElementById('flashcardContent').classList.add('hidden');
            document.getElementById('qcmContent').classList.add('hidden');
            document.getElementById('libreContent').classList.add('hidden');

            if (currentMode === 'qcm') {
                groupePolitique.classList.add('hidden');
            } else {
                groupePolitique.classList.remove('hidden');
            }

            if (currentMode === 'flashcard') {
                document.getElementById('flashcardContent').classList.remove('hidden');
            } else if (currentMode === 'qcm') {
                document.getElementById('qcmContent').classList.remove('hidden');
            } else {
                document.getElementById('libreContent').classList.remove('hidden');
            }

            showCard();
        }

        // Afficher une carte
        function showCard() {
            clearTimeout(autoNextTimeout);
            const member = shuffledMembers[currentIndex];
            answered = false;
            qcmStep = 1;

            photo.src = member.avatar;
            fonctionBadge.textContent = member.fonction;

            // Badge type
            let badgeClass = 'badge-' + member.type;
            if (member.type === 'cdp') badgeClass = 'badge-cdp';
            if (member.type === 'pres-groupe') badgeClass = 'badge-pres-groupe';
            if (member.type === 'pres-commission') badgeClass = 'badge-pres-commission';
            if (member.type === 'pres-delegation') badgeClass = 'badge-pres-delegation';
            fonctionBadge.className = 'fonction-badge ' + badgeClass;

            // En mode QCM et Flashcard, cacher le groupe politique
            if (currentMode === 'qcm' || currentMode === 'flashcard') {
                groupePolitique.classList.add('hidden');
                // Pour les pr√©sidents de groupe, afficher un texte g√©n√©rique
                if (member.type === 'pres-groupe') {
                    fonctionBadge.textContent = 'Pr√©sident(e) de groupe';
                }
                // Pour les pr√©sidents de commission, afficher un texte g√©n√©rique
                if (member.type === 'pres-commission') {
                    fonctionBadge.textContent = 'Pr√©sident(e) de commission';
                }
                // Pour les pr√©sidents de d√©l√©gation, afficher un texte g√©n√©rique
                if (member.type === 'pres-delegation') {
                    fonctionBadge.textContent = 'Pr√©sident(e) de d√©l√©gation';
                }
            } else {
                groupePolitique.innerHTML = `<span class="groupe-badge groupe-${member.groupeType}">${member.groupe}</span>`;
                groupePolitique.classList.remove('hidden');
            }

            progressText.textContent = `${currentIndex + 1} / ${shuffledMembers.length}`;
            progressFill.style.width = `${((currentIndex + 1) / shuffledMembers.length) * 100}%`;
            scoreDisplay.textContent = `Score: ${score.correct}/${score.total}`;

            prevBtn.disabled = currentIndex === 0;
            updateNextButton();

            if (currentMode === 'flashcard') {
                document.getElementById('flashcardHidden').classList.remove('hidden');
                document.getElementById('flashcardRevealed').classList.add('hidden');
            } else if (currentMode === 'qcm') {
                setupQCMStep1(member);
            } else {
                document.getElementById('libreInput').classList.remove('hidden');
                document.getElementById('libreResult').classList.add('hidden');
                document.getElementById('answerInput').value = '';
                document.getElementById('answerInput').focus();
            }

            document.getElementById('finalScore').classList.add('hidden');
        }

        function updateNextButton() {
            if (currentIndex === shuffledMembers.length - 1 && answered) {
                nextBtn.innerHTML = 'üîÑ Recommencer <span class="key-hint">[‚Üí]</span>';
            } else {
                nextBtn.innerHTML = 'Suivant ‚Üí <span class="key-hint">[‚Üí]</span>';
            }

            if (currentMode === 'flashcard') {
                nextBtn.disabled = false;
            } else {
                nextBtn.disabled = !answered;
            }
        }

        // Auto next
        function scheduleAutoNext() {
            clearTimeout(autoNextTimeout);
            autoNextTimeout = setTimeout(() => {
                if (currentIndex === shuffledMembers.length - 1) {
                    showFinalScore();
                } else {
                    goNext();
                }
            }, AUTO_NEXT_DELAY);
        }

        // Flashcard
        document.getElementById('showAnswerBtn').addEventListener('click', revealFlashcard);

        function revealFlashcard() {
            const member = shuffledMembers[currentIndex];
            document.getElementById('flashcardHidden').classList.add('hidden');
            document.getElementById('flashcardRevealed').classList.remove('hidden');
            document.getElementById('revealedName').textContent = `${member.prenom} ${member.nom}`;
            document.getElementById('revealedFonction').textContent = member.fonction;

            // R√©v√©ler le groupe politique
            groupePolitique.innerHTML = `<span class="groupe-badge groupe-${member.groupeType}">${member.groupe}</span>`;
            groupePolitique.classList.remove('hidden');

            // R√©v√©ler la vraie fonction (au cas o√π elle √©tait masqu√©e)
            fonctionBadge.textContent = member.fonction;

            answered = true;
            updateNextButton();
            scheduleAutoNext();
        }

        // QCM Step 1 - Nom
        function setupQCMStep1(correctMember) {
            qcmStep = 1;
            document.getElementById('stepDot1').className = 'step-dot active';
            document.getElementById('stepDot2').className = 'step-dot';
            document.getElementById('qcmQuestion').textContent = 'Qui est ce s√©nateur ?';
            document.getElementById('qcmNameResult').classList.add('hidden');
            document.getElementById('qcmFeedback').classList.add('hidden');

            // Filtrer par genre pour rendre le quiz plus difficile
            const others = allMembers.filter(m => m.nom !== correctMember.nom && m.genre === correctMember.genre);
            const wrongOptions = shuffle(others).slice(0, 3);
            const options = shuffle([correctMember, ...wrongOptions]);

            const container = document.getElementById('qcmOptions');
            container.innerHTML = '';

            options.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'qcm-option';
                btn.textContent = `${option.prenom} ${option.nom}`;
                btn.addEventListener('click', () => handleQCMStep1Click(btn, option, correctMember));
                container.appendChild(btn);
            });
        }

        function handleQCMStep1Click(btn, selected, correct) {
            if (qcmStep !== 1) return;

            const isCorrect = selected.nom === correct.nom;
            score.total++;
            if (isCorrect) score.correct++;

            document.querySelectorAll('.qcm-option').forEach(b => {
                b.disabled = true;
                if (b.textContent === `${correct.prenom} ${correct.nom}`) {
                    b.classList.add('correct');
                }
            });

            if (!isCorrect) {
                btn.classList.add('incorrect');
            }

            scoreDisplay.textContent = `Score: ${score.correct}/${score.total}`;

            setTimeout(() => {
                setupQCMStep2(correct);
            }, AUTO_NEXT_DELAY);
        }

        // QCM Step 2 - Groupe politique
        function setupQCMStep2(correctMember) {
            qcmStep = 2;
            document.getElementById('stepDot1').className = 'step-dot done';
            document.getElementById('stepDot2').className = 'step-dot active';
            document.getElementById('qcmQuestion').textContent = '√Ä quel groupe appartient-il/elle ?';

            // Garder le groupe cach√© jusqu'√† la r√©ponse
            groupePolitique.classList.add('hidden');

            document.getElementById('qcmNameResult').classList.remove('hidden');
            document.getElementById('qcmCorrectName').textContent = `${correctMember.prenom} ${correctMember.nom}`;
            document.getElementById('qcmFeedback').classList.add('hidden');

            const otherGroupes = groupes.filter(g => g !== correctMember.groupe);
            const wrongGroupes = shuffle(otherGroupes).slice(0, 3);
            const options = shuffle([correctMember.groupe, ...wrongGroupes]);

            const container = document.getElementById('qcmOptions');
            container.innerHTML = '';

            options.forEach(groupe => {
                const btn = document.createElement('button');
                btn.className = 'qcm-option';
                btn.textContent = groupe;
                btn.addEventListener('click', () => handleQCMStep2Click(btn, groupe, correctMember));
                container.appendChild(btn);
            });
        }

        function handleQCMStep2Click(btn, selectedGroupe, correct) {
            if (qcmStep !== 2) return;

            const isCorrect = selectedGroupe === correct.groupe;
            score.total++;
            if (isCorrect) score.correct++;

            document.querySelectorAll('.qcm-option').forEach(b => {
                b.disabled = true;
                if (b.textContent === correct.groupe) {
                    b.classList.add('correct');
                }
            });

            if (!isCorrect) {
                btn.classList.add('incorrect');
            }

            // R√©v√©ler le groupe politique apr√®s la r√©ponse
            groupePolitique.innerHTML = `<span class="groupe-badge groupe-${correct.groupeType}">${correct.groupe}</span>`;
            groupePolitique.classList.remove('hidden');

            // R√©v√©ler la vraie fonction
            fonctionBadge.textContent = correct.fonction;

            const feedback = document.getElementById('qcmFeedback');
            feedback.classList.remove('hidden', 'correct', 'incorrect');
            feedback.classList.add(isCorrect ? 'correct' : 'incorrect');
            feedback.textContent = isCorrect ? '‚úì Correct !' : `‚úó C'√©tait ${correct.groupe}`;

            scoreDisplay.textContent = `Score: ${score.correct}/${score.total}`;
            document.getElementById('stepDot2').className = 'step-dot done';

            answered = true;
            updateNextButton();
            scheduleAutoNext();
        }

        // Quiz libre
        document.getElementById('checkBtn').addEventListener('click', checkLibreAnswer);
        document.getElementById('answerInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') checkLibreAnswer();
        });

        function checkLibreAnswer() {
            if (answered) return;
            answered = true;

            const member = shuffledMembers[currentIndex];
            const input = document.getElementById('answerInput').value;

            const userAnswer = normalize(input);
            const correctNom = normalize(member.nom);

            const isCorrect = userAnswer.includes(correctNom) ||
                             (correctNom.includes(userAnswer) && userAnswer.length > 3);

            score.total++;
            if (isCorrect) score.correct++;

            document.getElementById('libreInput').classList.add('hidden');
            document.getElementById('libreResult').classList.remove('hidden');
            document.getElementById('libreCorrectName').textContent = `${member.prenom} ${member.nom}`;

            const feedback = document.getElementById('libreFeedback');
            feedback.classList.remove('correct', 'incorrect');
            feedback.classList.add(isCorrect ? 'correct' : 'incorrect');
            feedback.textContent = isCorrect ? '‚úì Correct !' : '‚úó Incorrect';

            scoreDisplay.textContent = `Score: ${score.correct}/${score.total}`;
            updateNextButton();
            scheduleAutoNext();
        }

        // Navigation
        prevBtn.addEventListener('click', goPrev);
        nextBtn.addEventListener('click', goNext);

        function goPrev() {
            clearTimeout(autoNextTimeout);
            if (currentIndex > 0) {
                currentIndex--;
                showCard();
            }
        }

        function goNext() {
            clearTimeout(autoNextTimeout);
            if (currentIndex === shuffledMembers.length - 1 && answered) {
                startQuiz();
            } else if (currentIndex < shuffledMembers.length - 1 && (answered || currentMode === 'flashcard')) {
                currentIndex++;
                showCard();
            }
        }

        // Navigation clavier
        document.addEventListener('keydown', (e) => {
            if (e.target.tagName === 'INPUT') {
                return;
            }

            if (quiz.style.display === 'none') return;

            switch(e.key) {
                case 'ArrowLeft':
                    if (!prevBtn.disabled) {
                        e.preventDefault();
                        goPrev();
                    }
                    break;
                case 'ArrowRight':
                    if (!nextBtn.disabled) {
                        e.preventDefault();
                        goNext();
                    }
                    break;
                case 'Enter':
                    e.preventDefault();
                    if (currentMode === 'flashcard' && !answered) {
                        revealFlashcard();
                    } else if (!nextBtn.disabled) {
                        goNext();
                    }
                    break;
            }
        });

        // Score final
        function showFinalScore() {
            clearTimeout(autoNextTimeout);
            const finalScore = document.getElementById('finalScore');
            const percentage = Math.round((score.correct / score.total) * 100);
            document.getElementById('finalScoreText').textContent =
                `Score final : ${score.correct} / ${score.total} (${percentage}%)`;
            finalScore.classList.remove('hidden');
        }

        // Initialisation
        updateFilterCount();
    </script>
</body>
</html>
